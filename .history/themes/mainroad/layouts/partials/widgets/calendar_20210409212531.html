<div class="widget-recent widget">
  <h4 class="widget__title">Calendar</h4>
  <div class="widget__content" id="calendar">
    <!--    <script type='text/javascript' charset='utf-8'
      src='https://scripts.hashemian.com/jss/feed.js?print=yes&numlinks=10&summarylen=50&seedate=yes&popwin=no&url=https:%2F%2Fwww.trumba.com%2Fcalendars%2Fsau39-master.rss%3Fmixin%3D823099%2c771757'></script>
  -->
    <script>
      const url = 'https://www.trumba.com/calendars/sau39-master.json?mixin=823099%2c823106%2c771757';
      const PROXY = window.location.hostname === "localhost"
        ? "https://cors-anywhere.herokuapp.com"
        : "/cors-proxy";
      fetch(`${PROXY}/${url}`).then((res) => {
        try {
          res.json().then(doc => {
            console.dir(doc);
            const MAX_EVENTS = 5;
            let events = '';
            doc.slice(0, MAX_EVENTS).forEach((event) => {
              const { title, startDateTime, permaLinkUrl } = event;
              const startDate = new Date(startDateTime).toLocaleDateString();
              events += `${startDate} <a href="${permaLinkUrl}">${title}</a><br/>`;
            });
            document.getElementById('calendar').innerHTML = events;
          });
        } catch (e) {
          console.error('Error in parsing the calendar feed');
          console.error(e);
        }
      })
    </script>
  </div>
</div>